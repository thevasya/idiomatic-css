# Принципы написания однородного, связного кода CSS

Данный документ содержит обоснованные рекомендации по стилю написания кода CSS.
Он не должен быть предписывающим, я не хочу навязывать свои стилевые предпочтения другим людям. Тем не менее, эти принципы поощряют использование существующих общепринятых, разумных шаблонов написания кода.

Это незаконченный документ, и новые идеи всегда приветствуются. Пожалуйста, дополняйте.


## Переводы

* [English](https://github.com/necolas/idiomatic-css)
* [Italian](https://github.com/necolas/idiomatic-css/tree/master/translations/it-IT)
* [日本語](https://github.com/necolas/idiomatic-css/tree/master/translations/ja-JP)
* [Nederlands](https://github.com/necolas/idiomatic-css/tree/master/translations/nl-NL)
* [Português (Brasil)](https://github.com/necolas/idiomatic-css/tree/master/translations/pt-BR)
* [Srpski](https://github.com/necolas/idiomatic-css/tree/master/translations/sr)
* [Türkçe](https://github.com/necolas/idiomatic-css/tree/master/translations/tr-TR)
* [Русский](https://github.com/necolas/idiomatic-css/tree/master/translations/ru)


## Содержание

1. [Основные принципы](#general-principles)
2. [Отступы](#whitespace)
3. [Комментарии](#comments)
4. [Форматирование](#format)
5. [Именование](#naming)
6. [Практический пример](#example)
7. [Организация кода](#organization)
8. [Сборка и развёртывание](#build-and-deployment)

[Благодарности](#acknowledgements)


<a name="general-principles"></a>
## 1. Основные принципы

> "Быть хорошим управляющим успешного проекта это, в том числе, осознавать, что
> писать код лишь для себя — Плохая Идея™. Если тысячи людей используют
> ваш код, пишите его максимально понятно, а не только исходя из ваших личных
> предпочтений в следовании спецификациям." - Idan Gazit

* Весь код в любом проекте должен выглядеть написанным одним человеком, вне зависимости от задействованного количества людей.
* Строго соблюдайте принятый стиль.
* Если сомневаетесь, действуйте по существующим общим шаблонам.


<a name="whitespace"></a>
## 2. Отступы

Весь исходный код вашего проекта должен быть написан в едином стиле. Всегда будьте последовательны в использовании отступов. Используйте их, чтобы улучшить читаемость.

* _Никогда_ не смешивайте пробелы и символы табуляции при создании отступов.
* Выберите между мягкими отступами (пробелами) и настоящими символами табуляции. Неотступно следуйте своему выбору. (Предпочительно: пробелы)
* Если используете пробелы, выберите их количество, используемое для каждого уровня отступа.
  (Предпочтительно: 4 пробела)

Совет: настройте свой редактор, чтобы он отображал непечатные символы. Это позволит вам устранить пробелы с конца строки или в пустых строках и избежать мусорных коммитов.


<a name="comments"></a>
## 3. Комментарии

Хорошо откомментированный код очень важен. Потратьте время, чтобы описать компоненты, как они работают, их ограничения, и то, как они созданы. Не заставляйте других членов команды догадываться о работе неочевидных частей кода.

Стиль комментирования должен быть прост и однороден для всех проектов.

* Располагайте комментарии перед комментируемым фрагментом.
* Избегайте комментариев в конце строки.
* Соблюдайте определённую заранее длину строки, например, в 80 колонок.
* Свободно используйте комментарии, чтобы разделить код CSS в отдельных разделах.
* Пишите комментарий с большой буквы, заканчивайте его точкой, и используйте однородные отступы в тексте.

Совет: назначьте в своём редакторе горячие клавиши для быстрого использования шаблонов комментирования.

#### Пример CSS:

```css
/* ==========================================================================
   Блок комментария для раздела
   ========================================================================== */

/* Блок комментария для подраздела
   ========================================================================== */

/*
 * Блок комментария для группы.
 * Идеален для многострочных пояснений и документации.
 */

/* Обычный комментарий */
```

#### Пример SCSS:

```scss
// ==========================================================================
// Блок комментария для раздела
// ==========================================================================

// Блок комментария для подраздела
// ==========================================================================

//
// Блок комментария для группы.
// Идеален для многострочных пояснений и документации.
//

// Обычный комментарий
```


<a name="format"></a>
## 4. Форматирование

Выбранный способ форматирования кода должен: гарантировать, что код легко читать и легко комментировать; сводить к минимуму вероятность случайного внесения ошибок; помогать в поиске изменений при использовании системы контроля версий.

1. Каждый селектор на отдельной строке в многоселекторном правиле.
2. Одиночный пробел перед открывающей скобкой блока объявлений.
3. Одно объявление на строку в блоке объявлений.
4. Один уровень отступа для каждого объявления.
5. Одиночный пробел после двоеточия объявления.
6. Всегда пишите точку с запятой в конце последнего объявления блока объявления.
7. Помещайте закрывающую скобку блока объявлений ровно под первым символом правила.
8. Разделяйте правила пустой строкой.

```css
.selector-1,
.selector-2,
.selector-3 {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    display: block;
    color: #333;
    background: #fff;
}
```

#### Порядок объявления

Свойства должны быть упорядочены по единыму принципу. Я предпочитаю группировать вместе связанные и структурно важные свойства (например, позиционирование и свойства, связанные с блоковой моделью) и указывать их до свойств типографики, фона и цвета.

```css
.selector {
    position: relative;
    display: block;
    width: 50%;
    height: 100px;
    padding: 10px;
    border: 0;
    margin: 10px;
    color: #fff
    background: #000;
}
```

Алфавитный порядок также популярен, но его недостаток в том, что он разделяет связанные свойства. Например, свойства позиционирования не группируются вместе, а свойства, связанные с блоковой моделью, могут расположиться в самом низу блока объявлений.

#### Исключения и небольшие отклонения

Большие блоки объявлений с одиночными свойствами могут использовать несколько иной, однострочный формат. В этом случае пробел должен находиться после открывающей и перед закрывающей скобками.

```css
.selector-1 { width: 10%; }
.selector-2 { width: 20%; }
.selector-3 { width: 30%; }
```

Длинные, разделённые запятой значения свойств - такие, как набор градиентов или теней - могут располагаться на нескольких строках в целях улучшения читаемости и упрощения внесения изменений. Существует несколько форматов, которые можно использовать; один из них представлен ниже.

```css
.selector {
    box-shadow:
        1px 1px 1px #000,
        2px 2px 1px 1px #ccc inset;
    background-image:
        linear-gradient(#fff, #ccc),
        linear-gradient(#f3c, #4ec);
}
```

#### Прочее

* Используйте строчные буквы при задании шестнадцатеричных значений, например, `#aaa`.
* Используйте одиночные или двойные кавычки последовательно. Предпочтение двойным кавычкам, например, `content: ""`.
* Всегда пишите значения атрибутов в селекторах в кавычках, например, `input[type="checkout"]`.
* _Где возможно_, не указывайте единицы измерения для нулевых значений, например, `margin: 0`.

### Препроцессоры: дополнительные предложения форматирования

У различных препроцессоров CSS есть различные возможности, функционал и синтаксис.
Ваши принципы должны быть расширены, чтобы быть способными приспособиться к особенностям использования любого препроцессора. Следующие предложения относятся к Sass.

* Ограничьте вложение до 1 уровня в глубину. Пересмотрите любое более 2 уровней.
  Это поможет избавиться от ислишней специфичности селекторов CSS.
* Избегайте большого количества вложенных правил. Разделяйте их, когда начнуться проблемы с читаемостью. Предпочтительно избегать вложений, которые распространяются более чем на 20 строк.
* Всегда располагайте `@extend` на первых строках блока объявлений.
* Где это возможно, группируйте `@include` в начале блока объявлений, после любых `@extend`.
* Подумайте о префиксах пользовательских функций с `x-` или другим пространством имён. Это поможет избежать путаницы между вашей функцией и стандартными функциями CSS, или функциями из других библиотек.

```scss
.selector-1 {
    @extend .other-rule;
    @include clearfix();
    @include box-sizing(border-box);
    width: x-grid-unit(1);
    // другие объявления
}
```


<a name="naming"></a>
## 5. Именование

Вы человек, а не компилятор или компрессор, не пытайтесь быть ими.

Используйте понятные и осмысленные имена для классов. Выбирйте ясный и однородный шаблон именования, который имеет смысл использовать как в HTML, так и в CSS файлах.

```css
/* Пример кода с плохим именованием */

.s-scr {
    overflow: auto;
}

.cb {
    background: #000;
}

/* Пример кода с лучшим именованием */

.is-scrollable {
    overflow: auto;
}

.column-body {
    background: #000;
}
```


<a name="example"></a>
## 6. Практический пример

Пример различных рекоммендаций.

```css
/* ==========================================================================
   Сетка макета
   ========================================================================== */

/*
 * Пример кода HTML:
 *
 * <div class="grid">
 *     <div class="cell cell-5"></div>
 *     <div class="cell cell-5"></div>
 * </div>
 */

.grid {
    overflow: visible;
    height: 100%;
    /* Предотвращаем перенос строчного блока на новую строку */
    white-space: nowrap;
    /* Убираем лишний отступ внутри ячейки */
    font-size: 0;
}

.cell {
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
    width: 20%;
    height: 100%;
    /* Устанавливаем отступ внутри ячейки */
    padding: 0 10px;
    border: 2px solid #333;
    vertical-align: top;
    /* Сбрасываем white-space */
    white-space: normal;
    /* Сбрасываем font-size */
    font-size: 16px;
}

/* Состояния ячейки */

.cell.is-animating {
    background-color: #fffdec;
}

/* Размеры ячейки
   ========================================================================== */

.cell-1 { width: 10%; }
.cell-2 { width: 20%; }
.cell-3 { width: 30%; }
.cell-4 { width: 40%; }
.cell-5 { width: 50%; }

/* Модификаторы ячейки
   ========================================================================== */

.cell--detail,
.cell--important {
    border-width: 4px;
}
```


<a name="organization"></a>
## 7. Организация кода

Организация кода является решающей для большого проекта.

* Логически отделяйте различные фрагменты кода.
* Используйте отдельные файлы (объединяемые на этапе сборки), чтобы разделить код различных компонентов.
* Если используете препроцессоры, выделите общие свойства и значения в переменные для цвета, типографики и т. д.


<a name="build-and-deployment"></a>
## 8. Сборка и развёртывание

Проект должны включать некоторые общие средства, при помощи которых его код может быть отлажен, оттестирован, сжат и версифицирован при подготовке к выпуску. Для этой задачи [grunt](https://github.com/cowboy/grunt), который создал Ben Alman — отличный инструмент.


<a name="acknowledgements"></a>
## Благодарности

Спасибо всем принявшим участие в [idiomatic.js](https://github.com/rwldrn/idiomatic.js). Этот проект был источником вдохновения и цитирования.